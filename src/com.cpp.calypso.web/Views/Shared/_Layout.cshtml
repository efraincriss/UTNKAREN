@using Abp.Timing

<!DOCTYPE html>
<html lang="@System.Globalization.CultureInfo.CurrentUICulture.Name">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>@ViewBag.Title - @Html.RenderNombreAplicacion().ToHtmlString()</title>


    @*<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.16/datatables.min.css"/>*@
    <link href="~/Scripts/Tablas/datatables.min.css" rel="stylesheet" />
    @*<script src="~/Scripts/Tablas/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>*@
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>


    <link href="~/Content/Chosen/chosen.min.css" rel="stylesheet" />
    <link href="~/Content/css/primereact_/primeicons.css" rel="stylesheet" />

    <link href="~/Content/css/react-bt/react-bootstrap-table-all.min.css" rel="stylesheet" />

    @*  <link href="~/Content/css/primereact_/fonts/primeicons.eot" rel="stylesheet" />
        <link href="~/Content/css/primereact_/fonts/primeicons.svg" rel="stylesheet" />
          <link href="~/Content/css/primereact_/fonts/primeicons.ttf" rel="stylesheet" />
         <link href="~/Content/css/primereact_/fonts/primeicons.woff" rel="stylesheet" />*@


    @Scripts.Render("~/bundles/modernizr")
    @Styles.Render("~/Content/bundle_css")


    @RenderSection("css", required: false)

    @Scripts.Render("~/bundles/jquery")
</head>
<body class="app header-fixed sidebar-fixed aside-menu-fixed aside-menu-hidden">

    @Html.Partial("_Header")

    <div class="app-body">

        @Html.Partial("_Sidebar")

        <!-- Main content -->
        <main class="main">

            @Html.Partial("_Breadcrumb")

            <div class="container-fluid">
                <div id="ui-view">

                    <div class="animated fadeIn">
                        <div class="row">

                            <div class="col-lg-12">
                                @if (IsSectionDefined("page_toolbar") || IsSectionDefined("page_title"))
                                {
                                    <div class="card">

                                        <div class="card-header">
                                            @if (IsSectionDefined("page_toolbar"))
                                            {
                                                @RenderSection("page_title", required: false)

                                                @RenderSection("page_toolbar", required: false)

                                            }
                                            else
                                            {
                                                @RenderSection("page_title", required: false)
                                            }
                                        </div>

                                        <div class="card-body">


                                            @RenderBody()

                                            @if (IsSectionDefined("view_form"))
                                            {
                                                <div class="row justify-content-center">
                                                    <div class="col-md-8">
                                                        @RenderSection("view_form", required: false)
                                                    </div>
                                                </div>
                                            }


                                        </div>
                                    </div>
                                }
                                else
                                {

                                    <div class="card-body" id="main-content">

                                        @RenderBody()

                                    </div>
                                }
                            </div>
                        </div>

                        <!--/.row-->
                    </div>
                </div>
            </div>
            <!-- /.conainer-fluid -->
        </main>

        @Html.Partial("_AsideMenu")

    </div>

    @Html.Partial("_Footer")


    @Html.Partial("_ModalError")

    @Html.Partial("_ModalContenedor")



    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/bootstrap")


    @Scripts.Render("~/bundles/vendor")
    <script src="~/Scripts/Tablas/datatables.min.js"></script>
    @*<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.16/datatables.min.js"></script>*@
    <script src="~/Scripts/bootstrap-select.js"></script>
    <script src="~/Scripts/moment.js"></script>
    <!-- Dynamic scripts of ABP system (They are created on runtime and can not be bundled) -->
    <script src="~/AbpScripts/GetScripts?v=@(Clock.Now.Ticks)" type="text/javascript"></script>

    <script src="~/Scripts/chosen.jquery.min.js"></script>
    @Scripts.Render("~/bundles/app")


    <script type="text/javascript">
        var UtilsClass = new UtilsClass();
    </script>

    <script type="text/javascript">
        $(function () {
            $('[data-toggle="tooltip"]').tooltip();
        })
    </script>

    <script type="text/javascript">
        function showContent() {
            element = document.getElementById("content");
            check = document.getElementById("check");
            if (check.checked) {
                element.style.display = 'block';
            }
            else {
                element.style.display = 'none';
            }
        }
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            // Agrego inputs a cada fila de mi tabla
            $('#empresas_table tfoot th:not(:last)').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class= "form-control" placeholder="Buscar por ' + title + '" />');
            });
            $('#cofertas_table tfoot th:not(:last)').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class= "form-control" placeholder="Buscar por ' + title + '" />');
            });
            $('#contratos_table tfoot th:not(:last)').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class= "form-control" placeholder="Buscar por ' + title + '" />');
            });
            $('#documentos_table tfoot th:not(:last)').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class= "form-control" placeholder="Buscar por ' + title + '" />');
            });
            $('#costos_table tfoot th:not(:last)').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class= "form-control" placeholder="Buscar por ' + title + '" />');
            });
            $('#adendas_table tfoot th:not(:last)').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class= "form-control" placeholder="Buscar por ' + title + '" />');
            });
            $('#proyectos_table tfoot th:not(:last)').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class= "form-control" placeholder="Buscar por ' + title + '" />');
            });
            $('#clientes_table tfoot th:not(:last)').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class= "form-control" placeholder="Buscar por ' + title + '" />');
            });
            $('table.display tfoot th:not(:last)').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class= "form-control" placeholder="Buscar por ' + title + '" />');
            });


            if ($.fn.dataTable.isDataTable('table.display')) {
                table = $('table.display').DataTable();
            }
            else {
                table = $('table.display').DataTable({
                    "order": [],
                    language: {
                        "sProcessing": "Procesando...",
                        "sLengthMenu": "Mostrar _MENU_ registros",
                        "sZeroRecords": "No se encontraron resultados",
                        "sEmptyTable": "Ningún dato disponible en esta tabla",
                        "sInfo": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                        "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
                        "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
                        "sInfoPostFix": "",
                        "sSearch": "Buscar:",
                        "sUrl": "",
                        "sInfoThousands": ",",
                        "sLoadingRecords": "Cargando...",
                        "oPaginate": {
                            "sFirst": "Primero",
                            "sLast": "Último",
                            "sNext": "Siguiente",
                            "sPrevious": "Anterior"
                        },
                        "oAria": {
                            "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
                            "sSortDescending": ": Activar para ordenar la columna de manera descendente"
                        }
                    }
                });
            }
            $('#empresas_table').DataTable({
                "order": [],
                destroy: true,
                language: {
                    "sProcessing": "Procesando...",
                    "sLengthMenu": "Mostrar _MENU_ registros",
                    "sZeroRecords": "No se encontraron resultados",
                    "sEmptyTable": "Ningún dato disponible en esta tabla",
                    "sInfo": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                    "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
                    "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
                    "sInfoPostFix": "",
                    "sSearch": "Buscar:",
                    "sUrl": "",
                    "sInfoThousands": ",",
                    "sLoadingRecords": "Cargando...",
                    "oPaginate": {
                        "sFirst": "Primero",
                        "sLast": "Último",
                        "sNext": "Siguiente",
                        "sPrevious": "Anterior"
                    },
                    "oAria": {
                        "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
                        "sSortDescending": ": Activar para ordenar la columna de manera descendente"
                    }
                }
            });

            // Aplico la busqueda
            table.columns().every(function () {
                var that = this;

                $('input', this.footer()).on('keyup change', function () {
                    if (this.id != 'no-filter') {
                        if (that.search() !== this.value) {
                            that
                                .search(this.value)
                                .draw();
                        }
                    }

                });
            });


        });


    </script>


    @RenderSection("scripts", required: false)


    @if (Html.RecolectarInformacionAnalisis())
    {
        @Html.Partial("_Tracking");

    }


</body>
</html>
